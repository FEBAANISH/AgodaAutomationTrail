package Pages;

import org.openqa.selenium.By;
import org.openqa.selenium.NoSuchElementException;
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.WebElement;

import BasePackage.BasePage;
import UtilPackage.Screenshot_Util;
import io.qameta.allure.Step;

public class CreateAccountPage extends BasePage {
	

	public CreateAccountPage(WebDriver driver) {
		super(driver);
		 

	}

	private By create_acc_button = By.xpath("//button[@data-element-name=\"sign-up-button\"]");
	private By SignUpFrame = By.xpath("//iframe[@title='Universal login']");
	private By FrameTitleValidation = By.xpath("//input[@id=\"firstName\"]");
	private By SignupTitle = By.xpath("/html/body/div[@id='root']/div/div/div/h3");

	
	public WebElement getCreate_acc_button() {
		return driver.findElement(create_acc_button);
	}

	public WebElement getSignUpFrame() {
		return driver.findElement(SignUpFrame);
	}

	public WebElement getFrameTitleValidation() {
		return driver.findElement(FrameTitleValidation);
	}

	public WebElement getSignupTitle() {
		return driver.findElement(SignupTitle);
	}

	public void waitForCreateButton() {
		waitForElementPresent(create_acc_button);
		System.out.println("present");

	}

	public void create_Account_Button_Click() {
		getCreate_acc_button().click();
	}

	public void waitForFrame() {
		waitForvisibilityOfElementLocated(SignUpFrame);

	}

	public void waitForTitle() {
		waitForvisibilityOfElementLocated(SignupTitle);

	}

	public boolean switchToFrame() {
		try {
			
			System.out.println("inside");
			
			driver.switchTo().frame(driver.findElement(SignUpFrame));
			return true; // Successfully switched to the frame
		} catch (NoSuchElementException e) {
			System.out.println("The specified iframe was not found: " + e.getMessage());
			return false; // Switching failed
		}
	}

	public String ValidatingFrameTitle() {

		if (switchToFrame()) {
			waitForTitle();
			su.takeElementScreenshot(getSignupTitle(), "CreateAccountPage");
			return getSignupTitle().getText();

		} else {
			System.out.println("Failed to switch to the signup iframe.");
			return null;
		}

	}

	public String validateFrameTitle() {

		String frameTitle = ValidatingFrameTitle();
		System.out.println("Frame Title: " + frameTitle);
		return frameTitle;

	}

}
