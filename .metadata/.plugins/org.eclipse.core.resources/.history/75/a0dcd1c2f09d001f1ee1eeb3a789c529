package Pages;

import org.apache.logging.log4j.Logger;
import org.openqa.selenium.By;
import org.openqa.selenium.NoSuchElementException;
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.WebElement;

import BasePackage.BasePage;

public class CreateAccountPage extends BasePage {
	
	private static final Logger logger = org.apache.logging.log4j.LogManager.getLogger(CreateAccountPage.class);

	public CreateAccountPage(WebDriver driver) {
		super(driver);

	}

	private By create_acc_button = By.xpath("//button[@data-element-name=\"sign-up-button\"]");
	private By SignUpFrame = By.xpath("//iframe[@title='Universal login']");
	private By FrameTitleValidation = By.xpath("//div[@data-cy='form-heading']/h2");
	private By emailTextField = By.xpath("//input[@data-cy='unified-email-input']");
	private By continueButton = By.xpath("//button[@data-cy=\"unified-email-continue-button\"]");
	private By passwordButton = By.xpath("//button[contains(@data-cy,\"password-button\")]");
	// private By SignupTitle =
	// By.xpath("/html/body/div[@id='root']/div/div/div/h3");

	public WebElement getContinueButton() {
		return driver.findElement(continueButton);
	}

	public void continuButtonClick() {
		getContinueButton().click();
	}

	public WebElement getPasswordButton() {
		return driver.findElement(passwordButton);
	}

	public void passwordButtonClick() {
		getPasswordButton().click();
	}

	public void waitForPasswordButton() {
		waitForElementPresent(passwordButton);
	}

	public WebElement getCreate_acc_button() {
		return driver.findElement(create_acc_button);
	}

	public WebElement getSignUpFrame() {
		return driver.findElement(SignUpFrame);
	}

	public WebElement getFrameTitleValidation() {
		return driver.findElement(FrameTitleValidation);
	}

	public void waitForCreateButton() {
		waitForElementPresent(create_acc_button);
		System.out.println("present");

	}

	public void create_Account_Button_Click() {
		getCreate_acc_button().click();
	}

	public void waitForFrame() {
		waitForvisibilityOfElementLocated(SignUpFrame);

	}

	public void waitForTitle() {
		waitForvisibilityOfElementLocated(FrameTitleValidation);

	}

	public WebElement getFrameTitle() {
		return driver.findElement(FrameTitleValidation);
	}

	public WebElement getEmailTextField() {
		return driver.findElement(emailTextField);
	}

	public boolean waitForEmailTextField() {
		waitForvisibilityOfElementLocated(emailTextField);
		return true;
	}

	public void emailValue() {
		getEmailTextField().sendKeys("agoda02@yopmail.com");
	}

	public boolean switchedToFrame() {
		try {

			System.out.println("inside");

			driver.switchTo().frame(driver.findElement(SignUpFrame));
			return true; // Successfully switched to the frame
		} catch (NoSuchElementException e) {
			System.out.println("The specified iframe was not found: " + e.getMessage());
			return false; // Switching failed
		}
	}

	public String ValidatingFrameTitle() {

		if (switchedToFrame()) {
			waitForTitle();

			return getFrameTitle().getText();

		} else {
			System.out.println("Failed to switch to the signup iframe.");
			return null;
		}

	}

	public String validateFrameTitle() {

		String frameTitle = ValidatingFrameTitle();
		System.out.println("Frame Title: " + frameTitle);
		return frameTitle;

	}

	public void emailSection() {
		if (waitForEmailTextField()) {
			emailValue();
			continuButtonClick();
			waitForPasswordButton();
			passwordButtonClick();

		} else {
			System.out.println("Email text field is not visible.");
		}

	}

}
